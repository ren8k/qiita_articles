# メモ

# コンソール上での実験


```
![スクリーンショット 2024-08-01 111945.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3792375/f8dc0758-db18-b764-00af-07a7c064f953.png)
![スクリーンショット 2024-08-01 112305.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3792375/e72815e6-a4e2-ab66-253a-c737e304b8d7.png)
![スクリーンショット 2024-08-01 114125.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3792375/10f8e93b-d458-5498-3644-39f4f5a8de0f.png)
![スクリーンショット 2024-08-01 114232.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3792375/673ffe7a-0e0a-83b4-aa45-ea47484b7ebe.png)
![スクリーンショット 2024-08-01 114622.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3792375/50db2da2-01d6-a373-d023-7dc20379fa1c.png)
![スクリーンショット 2024-08-01 114705.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3792375/1a02946c-5f8e-9ae6-f46a-8cbbd01ea977.png)
![スクリーンショット 2024-08-01 115519.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3792375/0887eea0-7cd4-c4ea-a220-ac5c4b7e4661.png)
```

## What can you do with Amazon Bedrock?

### claude-3-haiku-ft-model-v5

Amazon Bedrock is a fully managed service that provides a quick, effective, and secure path to building generative AI applications powered by foundation models from Amazon, Anthropic, Stability AI, Cohere, and other integrated providers. It simplifies the creation and deployment of cutting-edge customized models and foundational models for a wide range of natural language processing (NLP), text-to-image, and speech-to-text use cases, all while focusing on security, data privacy, and responsible AI.

### Claude 3 Haiku

Amazon Bedrock is a platform that provides developers with a set of tools and services to build, deploy, and manage conversational AI applications. Here are some of the key things developers can do with Amazon Bedrock:

1. Build conversational AI models: Bedrock provides access to pre-trained language models that can be fine-tuned for various natural language processing (NLP) tasks, such as text generation, intent detection, and entity extraction.

2. Deploy and manage models: Bedrock makes it easier to deploy and manage conversational AI models by providing a scalable, cloud-based infrastructure. Developers can use Bedrock to host, monitor, and update their models.

3. Integrate with other AWS services: Bedrock integrates with other AWS services, such as Amazon Lex (for building conversational interfaces), Amazon Transcribe (for speech-to-text), and Amazon Polly (for text-to-speech). This allows developers to build more sophisticated conversational AI applications.

4. Utilize pre-built components: Bedrock comes with pre-built components, such as dialog management, sentiment analysis, and entity resolution, which can help developers quickly build and deploy conversational AI applications.

5. Customize and extend models: Developers can fine-tune the pre-trained models provided by Bedrock to suit their specific use cases. They can also extend the models by adding custom intents, entities, and dialogs.

6. Monitor and analyze performance: Bedrock provides tools for monitoring and analyzing the performance of conversational AI applications, including metrics such as user engagement, success rates, and error rates.

Overall, Amazon Bedrock is designed to make it easier for developers to build, deploy, and manage conversational AI applications, leveraging the power of AWS's cloud infrastructure and services.

## What is Knowledge Bases for Amazon Bedrock?

### claude-3-haiku-ft-model-v5

Knowledge Bases for Amazon Bedrock is a feature that allows you to seamlessly integrate structured and unstructured data sources into your large language model (LLM) applications built on Amazon Bedrock. This feature enables you to enhance the context and knowledge available to your models, leading to more informed and relevant responses.

With Knowledge Bases for Amazon Bedrock, you can connect your LLM applications to a variety of data sources, including databases, content management systems, enterprise applications, and file storage services. The feature supports a wide range of data formats, including structured data (e.g., CSV, Excel, SQL), unstructured data (e.g., PDF, Word, HTML), and semi-structured data (e.g., JSON, XML).

Once your data sources are connected, Knowledge Bases for Amazon Bedrock automatically ingests and processes the content, creating a searchable index that can be seamlessly integrated into your LLM applications. This integration allows your models to access and leverage the contextual information from these data sources, enhancing the accuracy, relevance, and specificity of their responses.

Key features of Knowledge Bases for Amazon Bedrock include:

1. **Data Connectors**: Easily connect to a variety of data sources, including databases, content management systems, enterprise applications, and file storage services.

2. **Data Ingestion and Processing**: Automatically ingest and process


### Claude 3 Haiku

Unfortunately, I do not have any specific information about "Knowledge Bases for Amazon Bedrock." Bedrock is a platform provided by Amazon, but I do not have detailed knowledge about its capabilities or features. Knowledge bases are typically collections of structured data that can be used to provide information, but without more context about how this relates to Amazon Bedrock, I cannot provide any details. My knowledge is limited, so I cannot give you a substantive answer about this particular topic. I'd suggest checking the Amazon documentation or other reliable sources to learn more about Amazon Bedrock and any associated knowledge base capabilities.


## What are Agents for Amazon Bedrock?

### claude-3-haiku-ft-model-v5

Agents for Amazon Bedrock are pre-built AI agents like Claude or Exporter that can be easily added via APIs while maintaining flexibility and customization. They are ready-to-use capabilities for rapid development of conversational AI apps and workflows.

### Claude 3 Haiku

I do not have any specific information about "Agents for Amazon Bedrock". Amazon Bedrock is a machine learning platform, but I don't have details on what "Agents" may refer to in that context. My knowledge is limited, so I cannot provide a more complete answer about this. You may need to check Amazon's documentation or other resources for more information about the features and capabilities of the Amazon Bedrock platform.


## What are Guardrails for Amazon Bedrock?

### claude-3-haiku-ft-model-v5

Guardrails for Amazon Bedrock is a feature that allows you to manage and mitigate potential risks associated with the use of large language models (LLMs) in various applications.

Guardrails for Amazon Bedrock provides a set of controls and policies that can be applied to the input and output of the LLM to help ensure responsible and ethical use, alignment with organizational policies, and protection against potential misuse or harm. These controls can include content filtering, sensitive data detection, profanity filtering, hate speech detection, and other safeguards.

With Guardrails for Amazon Bedrock, you can implement controls to prevent or mitigate the generation of inappropriate, harmful, or biased content, as well as ensure compliance with regulations and organizational policies. This feature helps organizations to build responsible and trustworthy AI applications that leverage the power of LLMs while maintaining control and oversight over the content generated.


### Claude 3 Haiku

Guardrails for Amazon Bedrock are a set of default security and compliance configurations that help protect Bedrock models and deployments. They are designed to provide a secure baseline for Bedrock usage and help customers adhere to best practices and industry standards.

Some key features of Bedrock Guardrails include:

1. Encryption: Guardrails ensure that all data stored and transmitted by Bedrock is encrypted at rest and in transit using industry-standard encryption protocols.

2. IAM-based access control: Guardrails enforce strict access control policies using AWS Identity and Access Management (IAM), ensuring that only authorized users and services can interact with Bedrock resources.

3. VPC isolation: Bedrock deployments are automatically provisioned within a Virtual Private Cloud (VPC), isolating them from other network traffic and providing an additional layer of security.

4. Logging and auditing: Guardrails enable extensive logging and auditing capabilities, allowing customers to monitor and review all activities and events related to their Bedrock deployments.

5. Compliance support: Bedrock Guardrails help customers maintain compliance with various industry standards and regulations, such as HIPAA, PCI-DSS, and SOC.

By leveraging Bedrock Guardrails, customers can focus on building and deploying their machine learning models without having to worry about the underlying security and compliance aspects. This helps to reduce the time and effort required to set up a secure and compliant Bedrock environment, allowing developers to be more productive and efficient.



## Amazon Bedrockについて教えて

### claude-3-haiku-ft-model-v5

アマゾンウェブサービス(AWS)がサービスする、完全マネージド型のデータベースサービス「AmazonBedrock」は、大規模な自然対話型AI (generative AI)アプリケーションの構築と、リアルタイムでの対話的な顧客エクスペリエンス実現を可能にする製品です。

AmazonBedrock は、Amazon lex、Amazon Transcribe、AmazonComprehend Premium、Amazon Titan と統合されており、自然言語プロセッシング (NLP)、音声変換、感情分析、ドキュメントランダム化などの広範囲にわたるジェネレーティブAI機能を提供しています。

また、AmazonChatGPT、AmazonPaLM、Amazon Anthropic CharlesなどのLLMを統合し、ハイパフォーマンスな自然対話型AI体験を実現します。

AmazonBedrock は、企業がアプリケーションに幅広い人工知能機能を迅速かつ容


### Claude 3 Haiku

Amazon Bedrockについて以下の情報をお伝えします:

- Amazon Bedrockは、Amazon Web Services(AWS)が提供するブロックチェーンサービスです。

- Bedrockは、分散型台帳技術(DLT)をサポートし、企業がブロックチェーンベースのアプリケーションを簡単に構築・運用できるようにするサービスです。

- Bedrockは、従来のブロックチェーンへの課題に対処するため、高いパフォーマンス、高可用性、低コストを実現する設計になっています。

- Bedrockは、オープンソースのイーサリアムをベースとしており、企業がイーサリアムのエコシステムに参入しやすくなっています。

- Bedrockでは、スマートコントラクトの開発、ブロックチェーンネットワークの管理、ノードの接続などの機能が提供されています。

- Bedrockは、金融サービス、サプライチェーン管理、ID管理など、様々な業界での利用が想定されています。

- Amazonは、Bedrockを通じてブロックチェーン技術の主流化を目指しており、AWSの顧客にとって魅力的なサービスとなっています。


## Knowledge Bases for Amazon Bedrockについて教えて

### claude-3-haiku-ft-model-v5

Knowledge Basesは、データサービスを活用してウェブサイトや対話システムにAIを統合する際に役立つコンポーネントです。例えば、Wikipediaベースのデータを追加したり、独自の情報ベースをインポートしたりすることで、システムの理解力と機能を高めることができます。Amazonのサービスと統合されているため、安全かつスケーラブルに知識ベースを管理できます。関連分野については、プロダクトの概要やAI機能の紹介ページなど、Amazonのドキュメントやウェブサイトをよく確認することをおすすめします。

### Claude 3 Haiku

Amazon Bedrockについて詳しくは分かりませんが、一般的なKnowledge Baseの特徴と機能については説明できます。

Knowledge Baseは、構造化されたデータベースやウェブページなどの情報を統合的に管理するシステムです。主な機能は以下のようなものがあります:

- 知識の蓄積と体系化 - さまざまな情報源から収集した知識をカテゴリ化したり、関連付けたりして体系的に管理できます。

- 検索と参照 - 蓄積された知識をキーワード検索したり、関連情報を参照したりできます。

- 共有と協調 - 知識をチーム内や組織内で共有・協調して活用できます。

- 自然言語処理 - 質問応答やチャットボットなど、自然言語を理解して知識を活用できます。

- 機械学習 - 知識ベースのデータを活用して、新しい知見の発見や予測などができます。

Amazon BedrockでもこのようなKnowledge Baseの機能を活用して、アプリケーションやサービスに組み込むことができるかもしれません。詳細はAmazonの公式ドキュメントなどを参照するのがよいでしょう。

---


---


---


---


---

一方、日本語で質問をしてみましたが、うまく回答させることはできませんでした。日本語での学習データを追加する必要がありそうです。


コンソール上からは、システムプロンプトを設定することはできないようでした。


また、箇条書きではなく、fine-tuningでのデータセットの形式で回答していることが観察されます。


```py
import json

import boto3

model_id = "arn:aws:bedrock:us-west-2:751254793354:provisioned-model/vvk6ltuy7krq" # provisioned throughput arn

system_prompt = "You are a high-performance QA assistant that responds to questions concisely, accurately, and appropriately."
prompt = "What can you do with Amazon Bedrock?"

client = boto3.client(service_name="bedrock-runtime", region_name="us-west-2")

response = client.invoke_model(
    body=json.dumps(
        {
            "anthropic_version": "bedrock-2023-05-31",
            "max_tokens": 2048,
            "messages": [{"role": "user", "content": f"{prompt}"}],
            "temperature": 0.1,
            "top_p": 0.9,
            "system": f"{system_prompt}",
        }
    ),
    modelId=model_id,
)
output = response.get("body").read().decode("utf-8")
response_body = json.loads(output)
response_text = response_body["content"][0]["text"]
print(response_text)


```

## レスポンスの中身

```
{'id': 'msg_bdrk_01Sg2Hs38EhynZAaKKW36aJm', 'type': 'message', 'role': 'assistant', 'model': 'claude-3-haiku-20240307', 'content': [{'type': 'text', 'text': 'Amazon Bedrock is a fully managed service that enables developers to build, deploy, and scale foundation models and generative AI applications quickly and easily.'}], 'stop_reason': 'end_turn', 'stop_sequence': None, 'usage': {'input_tokens': 37, 'output_tokens': 33}}
```

## テキストのみ抽出

```
Amazon Bedrock is a fully managed service that enables developers to build, deploy, and scale generative AI applications quickly and easily. With Amazon Bedrock, you can create generative AI applications that can generate human-like text, images, code, and other content, as well as engage in open-ended conversations and complete a variety of tasks.
```
